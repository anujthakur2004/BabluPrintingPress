{% extends "base.html" %}
{% block title %}
<title>{{ product.name }} | Bablu Printing Press</title>
{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row g-5 align-items-start">

   <!-- LEFT: MEDIA -->
<div class="col-lg-7">
  <div class="product-media-wrapper">

    {% if product.videos.exists %}
      <!-- VIDEO -->
      <div class="media-box">
        <video class="product-media"
               controls
               muted
               autoplay
               loop
               playsinline>
          <source src="{{ product.videos.first.video.url }}" type="video/mp4">
        </video>
      </div>

    {% elif product.images.exists %}
      <!-- IMAGE CAROUSEL -->
      <div id="productCarousel"
           class="carousel slide"
           data-bs-ride="carousel"
           data-bs-interval="3000">

        <div class="carousel-inner">

          {% for image in product.images.all %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <img src="{{ image.image.url }}"
                 class="product-media"
                 alt="{{ product.name }}">
          </div>
          {% endfor %}

        </div>

        {% if product.images.count > 1 %}
        <div class="carousel-indicators">
          {% for image in product.images.all %}
          <button type="button"
                  data-bs-target="#productCarousel"
                  data-bs-slide-to="{{ forloop.counter0 }}"
                  class="{% if forloop.first %}active{% endif %}">
          </button>
          {% endfor %}
        </div>
        {% endif %}

      </div>

    {% else %}
      <!-- FALLBACK -->
      <div class="media-box text-muted">
        No preview available
      </div>
    {% endif %}

  </div>
</div>



    <!-- RIGHT: PRODUCT INFO (Smaller) -->
    <div class="col-lg-5">

      <h1 class="product-detail-title mb-2">{{ product.name }}</h1>

      <div class="product-detail-price mb-3">
        ₹{{ product.starting_price }}
        {% if product.price_note %}
          <span class="text-muted small">({{ product.price_note }})</span>
        {% endif %}
      </div>

      <!-- Product Description -->
      {% if product.description %}
        <div class="card border-0 shadow-sm mb-4 p-4 bg-white">
          <p class="mb-0 text-muted" style="line-height: 1.8;">
            {{ product.description|linebreaks }}
          </p>
        </div>
      {% endif %}

      <div class="card border-0 shadow-sm p-4 bg-white mb-4">
        <h6 class="fw-semibold mb-3">Order Details:</h6>
        <ul class="small mb-0">
          <li>Product specifications and preferences</li>
          <li>Customization details (if applicable)</li>
          <li>Shipping address</li>
          <li>Contact information</li>
          <li>Any special requirements</li>
        </ul>
      </div>

      <!-- CTA BOX -->
      <div class="product-cta">
        <a href="https://wa.me/919417044419?text=I am interested in {{ product.name }}"
           class="btn btn-success btn-lg w-100 mb-2">
          <i class="bi bi-whatsapp"></i> WhatsApp Enquiry
        </a>

        <p class="text-center small text-muted mt-2">
          Can’t use WhatsApp?
          <br>
          Email us at
          <a href="mailto:babluprintingpress@gmail.com">
            babluprintingpress@gmail.com
          </a>
        </p>
      </div>

    </div>
  </div>
</div>

{% endblock %}
